<swx-message role="listitem" class="message showName their last spacesWelcomeMessage lastInBubble read participant swx-in-viewport" tabindex="-1" aria-relevant="all" data-id="1505910543632">

   <!-- ko ifnot: isMeCommandMessage -->
   <!-- ko if: showAuthorInfo --><!-- /ko -->
   <!-- /ko -->
   <!-- ko if: isCallActivityItem --><!-- /ko -->
   <div class="bubble">
      <!-- ko if: isSMS --><!-- /ko -->
      <!-- ko ifnot: isMeCommandMessage -->
      <!-- ko if: renderAuthorInfo --><!-- /ko -->
      <!-- /ko -->
      <div class="arrow"></div>
      <div class="content">
         <div class="ctas">
            <div class="cta clickable" ng-show="selectedOrder && selectedOrder.customer_message">
               <div class="title fontSize-h3 iconfont messageUnread">Lời nhắn từ: {{selectedOrder.buyer_name}}</div>
               <div class="description fontSize-p">{{selectedOrder.customer_message}}</div>
            </div>
            <div class="cta clickable" ng-show="selectedOrder && selectedOrder.admin_note">
               <div class="title fontSize-h3 iconfont warning">Admin Notes</div>
               <div class="description fontSize-p">{{selectedOrder.admin_note}}</div>
            </div>
         </div>

         <div class="" ng-show="isPageBusy">
               <div class="ytp-spinner ytp-small-mode" data-layer="4" style="width: 40px">
                 <div>
                    <div class="ytp-spinner-container" >
                       <div class="ytp-spinner-rotator">
                          <div class="ytp-spinner-left">
                             <div class="ytp-spinner-circle"></div>
                          </div>
                          <div class="ytp-spinner-right">
                             <div class="ytp-spinner-circle"></div>
                          </div>
                       </div>
                    </div>
                 </div>
                 <div class="ytp-spinner-message" style="display: none;">
                      Getting information from Facebook...
                  </div>
              </div>
            </div>
         <div class="welcomeMessage">
           <!--  <div class="loader load-container" ng-show="isPageBusy">
               <svg class="circular" viewBox="25 25 50 50">
                  <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
               </svg>
            </div> -->
            <!-- Null post -->
            <!-- <span ng-show="!fbContent" ng-hide>Khách hàng inbox hoặc không tìm thấy gói sản phẩm</span> -->
            <!-- /Null post -->
            <div style="text-align: left;">
               <span class="emoticon hi large animated" style="display: inline-block;"><span class="emoSprite">(hi)</span>
               <img class="" alt="" width="40" height="40" aria-hidden="true" role="presentation" ng-src="{{currentPageAvatar}}" style="display: block;border-radius: 50%">
               </span>
               <div class="clickable" style="display: inline-block;">
                  <div class="title fontSize-h2 splitter">{{currentPageName}}</div>
               </div>
            </div>
            <div ng-if="!fbContent" style="padding: 100px 0">
             <span class="no-content" style="    font-size: 18px;font-weight: 300;line-height: 45px;">
              <span class="iconfont sad" title="No content" style="display:inline-block;font-size: 60px;"></span>
               <span  style="display:inline-block;">Khách hàng Inbox hoặc không tìm thấy dữ liệu bài viết</span>
             </span>
            </div>
            <div ng-if="fbContent" class="js-simple-collapse js-simple-collapse--description" data-ng-style="isPostExpanded && {'max-height':'none'}">
               <div class="js-simple-collapse-inner">
                  <div style="white-space: pre-line;display: block;font-size: 13px;line-height: 1.6;font-weight: 300; text-align: left;">
                     {{fbContent.message}}
                  </div>
                  <span class="js-wrapper-simple-collapse-more-btn" ng-show="isPostExpanded == false">
                  </span>
                  <button class="js-simple-collapse-more-btn btn  circle stroke" title="{{isPostExpanded == true ? 'Thu gọn' : 'Xem thêm'}}" ng-click="toggleExpandPost()" style="position: absolute;bottom: 5px;z-index: 10;margin-left: 10px;width: auto;    min-width: 130px;height: 30px;" ng-show="isPostExpanded == false">
                  <span class="iconfont" ng-class="isPostExpanded == true ? 'chevronUp' : 'chevronDown'" style="
                     display: inline-block;padding: 0;margin-top: -5px;" >
                  </span></button>
               </div>
            </div>
            <!-- ko if: isJoiningEnabled -->
            <swx-invite-link class="invite-link" ng-if="fbContent">
               <div class="inviteLink">
                  <!-- ko ifnot: uri --><!-- /ko -->
                  <!-- ko if: uri -->
                  <perfect-scrollbar class="scroller" suppress-scroll-y="true" wheel-propagation="true">
                     <div style="height: 150px;width:100%" >
                        <!-- The Gallery as lightbox dialog, should be a child element of the document body -->
                        <div id="links" class="product-gallery">
                           <a href="{{photo}}" target="_blank" class="post-attachment-item" title="Post Attachments Gallery" ng-repeat="photo in fbPhotos">
                           <img ng-src="{{photo}}" style="height: 140px;">
                           </a>
                        </div>
                     </div>
                  </perfect-scrollbar>
                  <!-- /ko -->
               </div>
            </swx-invite-link>
            <!-- /ko -->
         </div>
         <!-- ko if: showSpacesCTA -->
         <div class="" style="position: relative;float: left;" ng-show="isLoadingOrderHistory">
               <div class="ytp-spinner-message" style="display: block;position: relative;left: 0;margin-left: 0;line-height: 30px;vertical-align: middle;margin-top: 7px;text-align: left;">
                      Đang tải lịch sử Order từ khách hàng...
                      <div style="color: #888; font-size: 12px;width:100%;line-height: 1;">Quá trình này có thế mất khá nhiều thời gian, vui lòng kiên nhẫn...</div>
                  </div>
            </div>
            <!-- <div ng-if="oldOrder.length < 1 && !isLoadingOrderHistory" style="color: #888; font-size: 12px;width:100%;text-align: left;float: left;">Không tìm thấy dữ liệu đặt hàng từ {{selectedOrder.buyer_mobile}}</div> -->
            <div class="" ng-hide="isLoadingOrderHistory || oldOrder.length < 1">
               <h2 style="color:#888;float: left;margin-bottom: 20px;font-size: 18px;">Lịch sử đặt hàng từ {{selectedOrder.buyer_mobile}}</h2>
               <div style="width: 100%; font-size: 12px;margin-top: 25px;color:#888">
                 <div class="col-md-12" ng-repeat="o in oldOrder">
                   <div class="row">
                     <div class="col-md-1">
                       {{$index + 1}}
                     </div>
                     <div class="col-md-2">
                       <span style="float: left;">{{o.buyer_name}}</span>
                     </div>
                     <div class="col-md-2">
                       <span style="float: left;">{{o.buyer_mobile}}</span>
                     </div>
                     <div class="col-md-1">
                       <span style="float: left;">{{getSourceFromId(o.order_source_id).short_title}}</span>
                     </div>
                     <div class="col-md-2">
                       <span style="float: left;">{{getPackFromId(o.product_pack_id).short_title
                                                            + '/' + getPackFromId(o.product_pack_id).price
                                                            + 'K'}}</span>
                     </div>
                     <div class="col-md-2">
                       <span style="float: left;">{{o.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</span>
                     </div>
                     <div class="col-md-2">
                       <span style="float: left;">{{findUser(o.checked_by).last_name}}</span>
                     </div>
                   </div>
                 </div>
               </div>
            </div>
         <!-- /ko -->
         <!-- ko if: othersAddedMessageContent --><!-- /ko -->
         <!-- ko if: agentsMessageContent --><!-- /ko -->
      </div>
      <!-- ko ifnot: isMeCommandMessage -->
      <!-- ko if: isEdited --><!-- /ko -->
      <!-- /ko -->
      <!-- ko if: isDeleted --><!-- /ko -->
      <!-- ko if: messageDeliveryIndicatorEnabledSW4B --><!-- /ko -->
   </div>
   <!-- /ko -->
</swx-message>
